<!DOCTYPE HTML>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="copyright" content="App::financeta Authors">
    <meta name="author" content="Vikas N Kumar <vikas@cpan.org>">
    <meta name="description" content="App::financeta">
    <link rel="icon" href="chart-line-solid.png" type="image/png">
    <title>[% page.title %]</title>
    <script src="https://code.highcharts.com/stock/highstock.js"></script>
    <style>
    #chart-container {
        min-width: 600px;
        min-height: 400px;
        height: 600px;
        width: 95%;
        margin: 20px;
    };
    </style>
    </head>
    <body>
        <h1>[% page.title %]</h1>
        <hr/>
        <div id="chart-container">
        </div>
        <hr/>
    <script type="text/javascript">
        window.chart = new Highcharts.stockChart('chart-container', {
            yAxis: [
                {
                    labels: { align: 'left' },
                    height: '80%',
                    resize: { enabled: true },
                },
                {
                    labels: { align: 'left' },
                    top: '80%',
                    height: '20%',
                    opposite: true,
                    offset: 0,
                    resize: { enabled: true },
                },
            ],
            title: { text: "[% chart.title %]" },
            series:[
            [% FOREACH el IN chart.charts %]
                {
                    type: "[% el.type %]",
                    name: "[% el.title %]",
                    id: "[% el.id %]",
                    data: [% el.data %],
                    [% IF el.y_axis %]
                    yAxis: [% el.y_axis %],
                    [% END %]
                },
            [% END %]
            ],
            responsive: {
                rules: [{
                    condition: { maxWidth: 800 },
                    chartOptions: {
                        rangeSelector: {
                            inputEnabled: false
                        }
                    }
                }]
            }
        });
    </script>
    </body>
</html>
